@php
    $transactions = [
        'item1' => [
            'id' => 1,
            'nickname' => 'TrinitySap',
            'img' => 'src/img/icons/transactions/bitcoin.svg',
            'time' => '16:46',
            'date' => '12 Dec 2023',
            'amount' => '2.454665',
            'vat' => '0.0435',
            'profit' => '0.236564',
            'link' => '#',
            'status' => 'completed',
            'address' => 'EfkgmEMfkkjEDOf.hkfdnEfkgmEMfkkjEDOf.hkfdn',
            'direction' => 'output',
        ],
        'item2' => [
            'id' => 2,
            'nickname' => 'TrinitySap',
            'img' => 'src/img/icons/transactions/ethereum.svg',
            'time' => '16:46',
            'date' => '12 Dec 2023',
            'amount' => '2.454665',
            'vat' => '0.0435',
            'profit' => '0.236564',
            'link' => '#',
            'status' => 'completed',
            'address' => 'EfkgmEMfkkjEDOf.hkfdnEfkgmEMfkkjEDOf.hkfdn',
            'direction' => 'input',
        ],
        'item3' => [
            'id' => 3,
            'nickname' => 'TrinitySap',
            'img' => 'src/img/icons/transactions/L.svg',
            'time' => '16:46',
            'date' => '12 Dec 2023',
            'amount' => '2.454665',
            'vat' => '0.0435',
            'profit' => '0.236564',
            'link' => '#',
            'status' => 'pending',
            'address' => 'EfkgmEMfkkjEDOf.hkfdnEfkgmEMfkkjEDOf.hkfdn',
            'direction' => 'input',
        ],
        'item4' => [
            'id' => 4,
            'nickname' => 'TrinitySap',
            'img' => 'src/img/icons/transactions/bitcoin.svg',
            'time' => '16:46',
            'date' => '12 Dec 2023',
            'amount' => '2.454665',
            'vat' => '0.0435',
            'profit' => '0.236564',
            'link' => '#',
            'status' => 'completed',
            'address' => 'EfkgmEMfkkjEDOf.hkfdnEfkgmEMfkkjEDOf.hkfdn',
            'direction' => 'output',
        ],
        'item5' => [
            'id' => 5,
            'nickname' => 'TrinitySap',
            'img' => 'src/img/icons/transactions/ethereum.svg',
            'time' => '16:46',
            'date' => '12 Dec 2023',
            'amount' => '2.454665',
            'vat' => '0.0435',
            'profit' => '0.236564',
            'link' => '#',
            'status' => 'completed',
            'address' => 'EfkgmEMfkkjEDOf.hkfdnEfkgmEMfkkjEDOf.hkfdn',
            'direction' => 'output',
        ],
        'item6' => [
            'id' => 6,
            'nickname' => 'TrinitySap',
            'img' => 'src/img/icons/transactions/L.svg',
            'time' => '16:46',
            'date' => '12 Dec 2023',
            'amount' => '2.454665',
            'vat' => '0.0435',
            'profit' => '0.236564',
            'link' => '#',
            'status' => 'pending',
            'address' => 'EfkgmEMfkkjEDOf.hkfdnEfkgmEMfkkjEDOf.hkfdn',
            'direction' => 'input',
        ],
        'item7' => [
            'id' => 7,
            'nickname' => 'TrinitySap',
            'img' => 'src/img/icons/transactions/bitcoin.svg',
            'time' => '16:46',
            'date' => '12 Dec 2023',
            'amount' => '2.454665',
            'vat' => '0.0435',
            'profit' => '0.236564',
            'link' => '#',
            'status' => 'completed',
            'address' => 'EfkgmEMfkkjEDOf.hkfdnEfkgmEMfkkjEDOf.hkfdn',
            'direction' => 'output',
        ],
        'item8' => [
            'id' => 8,
            'nickname' => 'TrinitySap',
            'img' => 'src/img/icons/transactions/ethereum.svg',
            'time' => '16:46',
            'date' => '12 Dec 2023',
            'amount' => '2.454665',
            'vat' => '0.0435',
            'profit' => '0.236564',
            'link' => '#',
            'status' => 'completed',
            'address' => 'EfkgmEMfkkjEDOf.hkfdnEfkgmEMfkkjEDOf.hkfdn',
            'direction' => 'output',
        ],
        'item9' => [
            'id' => 9,
            'nickname' => 'TrinitySap',
            'img' => 'src/img/icons/transactions/L.svg',
            'time' => '16:46',
            'date' => '12 Dec 2023',
            'amount' => '2.454665',
            'vat' => '0.0435',
            'profit' => '0.236564',
            'link' => '#',
            'status' => 'pending',
            'address' => 'EfkgmEMfkkjEDOf.hkfdnEfkgmEMfkkjEDOf.hkfdn',
            'direction' => 'input',
        ],
        'item10' => [
            'id' => 10,
            'nickname' => 'TrinitySap',
            'img' => 'src/img/icons/transactions/bitcoin.svg',
            'time' => '16:46',
            'date' => '12 Dec 2023',
            'amount' => '2.454665',
            'vat' => '0.0435',
            'profit' => '0.236564',
            'link' => '#',
            'status' => 'completed',
            'address' => 'EfkgmEMfkkjEDOf.hkfdnEfkgmEMfkkjEDOf.hkfdn',
            'direction' => 'output',
        ],
        'item11' => [
            'id' => 11,
            'nickname' => 'TrinitySap',
            'img' => 'src/img/icons/transactions/ethereum.svg',
            'time' => '16:46',
            'date' => '12 Dec 2023',
            'amount' => '2.454665',
            'vat' => '0.0435',
            'profit' => '0.236564',
            'link' => '#',
            'status' => 'completed',
            'address' => 'EfkgmEMfkkjEDOf.hkfdnEfkgmEMfkkjEDOf.hkfdn',
            'direction' => 'output',
        ],
        'item12' => [
            'id' => 12,
            'nickname' => 'TrinitySap',
            'img' => 'src/img/icons/transactions/L.svg',
            'time' => '16:46',
            'date' => '12 Dec 2023',
            'amount' => '2.454665',
            'vat' => '0.0435',
            'profit' => '0.236564',
            'link' => '#',
            'status' => 'pending',
            'address' => 'EfkgmEMfkkjEDOf.hkfdnEfkgmEMfkkjEDOf.hkfdn',
            'direction' => 'input',
        ],
        'item13' => [
            'id' => 13,
            'nickname' => 'TrinitySap',
            'img' => 'src/img/icons/transactions/bitcoin.svg',
            'time' => '16:46',
            'date' => '12 Dec 2023',
            'amount' => '2.454665',
            'vat' => '0.0435',
            'profit' => '0.236564',
            'link' => '#',
            'status' => 'completed',
            'address' => 'EfkgmEMfkkjEDOf.hkfdnEfkgmEMfkkjEDOf.hkfdn',
            'direction' => 'output',
        ],
        'item14' => [
            'id' => 14,
            'nickname' => 'TrinitySap',
            'img' => 'src/img/icons/transactions/ethereum.svg',
            'time' => '16:46',
            'date' => '12 Dec 2023',
            'amount' => '2.454665',
            'vat' => '0.0435',
            'profit' => '0.236564',
            'link' => '#',
            'status' => 'completed',
            'address' => 'EfkgmEMfkkjEDOf.hkfdnEfkgmEMfkkjEDOf.hkfdn',
            'direction' => 'output',
        ],
    ];
@endphp

<div class="transactions">
    <table
        class="
            transactions__table
        "
    >
        <thead
            class="
                transactions__head
                @if (request()->is('wallet'))
                    d-none
                @endif
            "
        >
            <tr>
                <th class="transactions__head__date transactions__head__item title-little">
                    Date
                </th>

                <th class="transactions__head__name transactions__head__item title-little">
                    Nickname
                </th>

                <th class="transactions__head__amount transactions__head__item title-little">
                    Amount
                </th>

                <th class="transactions__head__vat transactions__head__item title-little">
                    VAT
                </th>

                <th class="transactions__head__profit transactions__head__item title-little">
                    Profit
                </th>

                <th
                    class="
                        transactions__head__link transactions__head__item title-little
                        @if (request()->is('referral/transactions'))
                            d-block
                        @else
                            d-none
                        @endif
                    "
                >
                    Link
                </th>


                <th class="transactions__head__status transactions__head__item title-little">
                    Status
                </th>
            </tr>
        </thead>

        <tbody
            class="
                transactions__table__tbody
            "
        >
            @foreach ($transactions as $item)
                <tr
                    class="
                        transactions__item
                        @if (request()->is('referral/transactions'))
                            catalog__block
                        @endif
                        @if (request()->is('referral') || request()->is('wallet'))
                            {{ $loop->index > 4 ? 'd-none' : '' }}
                        @endif
                    "
                >
                    <td class="transactions__item__text transactions__item__text--first">
                        <div class="d-flex flex-row align-items-center">
                            <p class="transactions__item__date title-little">
                                {{ $item['time']}}, {{ $item['date']}}

                            </p>

                            <img src="{{ asset($item['img'])}}" alt="Item icon" class="transactions__item__img">
                        </div>
                    </td>

                    @if (!request()->is('wallet'))
                        <td class="transactions__item__name transactions__item__text">
                            <p class="title-little">
                                {{ $item['nickname']}}
                            </p>
                        </td>

                        <td class="transactions__item__amount transactions__item__text">
                            <p class="title-little">
                                {{ $item['amount']}}
                            </p>
                        </td>

                        <td class="transactions__item__vat transactions__item__text">
                            <p class="title-little">
                                {{ $item['vat']}}
                            </p>
                        </td>
                    @else
                        <td class="transactions__item__vat transactions__item__text d-flex flex-row align-items-center">
                            @if ($item['direction'] === 'input')
                                <img src="{{ asset('src/img/icons/transactions/input.svg')}}" alt="Input arrow" class="transactions__item__vat__img">
                            @else
                                <img src="{{ asset('src/img/icons/transactions/output.svg')}}" alt="Input arrow" class="transactions__item__vat__img">
                            @endif
                            <p class="title-little">
                                {{ $item['address']}}
                            </p>
                        </td>
                    @endif

                    <td
                        class="transactions__item__profit transactions__item__text"
                        style = "
                            @if (request()->is('referral/transactions'))
                                margin-right: 4.5vw;
                            @else
                                margin-right: 8.1vw;
                            @endif
                        "
                    >
                        <p class="title-little">
                            {{ $item['profit']}}
                        </p>
                    </td>

                    @if (request()->is('referral/transactions'))
                        <td href='{{ $item['link'] }}' class="transactions__item__link transactions__item__text">
                            <div class="d-flex flex-row align-items-center transactions__item__status">
                                <img src="{{ asset('src/img/icons/download.svg')}}" alt="">

                                <p class="title-little">
                                    Download
                                </p>
                            </div>
                        </td>
                    @endif


                    @if ($item['status'] == 'completed')
                        <td
                            class="transactions__item__status--completed transactions__item__text"
                        >
                            <div class="d-flex flex-row align-items-center justify-content-end transactions__item__status">
                                <p class="title-little">
                                    Completed
                                </p>

                                <img src="{{asset('src/img/icons/transactions/check.svg')}}" alt="">
                            </div>
                        </td>
                    @else
                        <td
                            class="transactions__item__status--pending transactions__item__text"
                        >
                            <div class="d-flex flex-row align-items-center justify-content-end transactions__item__status">
                                <p class="title-little">
                                    Pending
                                </p>

                                <img src="{{asset('src/img/icons/transactions/pending.svg')}}" alt="">
                            </div>
                        </td>
                    @endif
                </tr>
            @endforeach
        </tbody>
    </table>

    <div class="transactions__mob">
        <h5 class="transactions__mob__head title-little">
            Date
        </h5>

        <div
            class=" transactions__mob__main
                @if (request()->is('referral/transactions'))
                    catalog
                @endif
            "
        >
            @foreach($transactions as $key => $item)
                <div class="
                    transactions__mob__block
                    @if (request()->is('referral/transactions'))
                        catalog__block
                    @endif

                    @if (request()->is('referral') || request()->is('wallet'))
                        {{ $loop->index > 4 ? 'd-none' : '' }}
                    @endif
                    "
                >
                    <div class="transactions__mob__title d-flex flex-row align-items-center">
                        <p class="transactions__item__date title-little">
                            {{ $item['time']}}, {{ $item['date']}}
                        </p>

                        <img src="{{ asset($item['img'])}}" alt="Item icon" class="transactions__mob__img">
                    </div>

                    <div class="transactions__mob__info flex-column">
                        @if (!request()->is('wallet'))
                            <div class="transactions__mob__info__row d-flex flex-row align-items-center">
                                <h5 class="transactions__mob__info__row__title title-little">
                                    Nickname:
                                </h5>

                                <p class="transactions__mob__info__row__text title-little">
                                    {{ $item['nickname']}}
                                </p>
                            </div>

                            <div class="transactions__mob__info__row d-flex flex-row align-items-center">
                                <h5 class="transactions__mob__info__row__title title-little">
                                    Amount:
                                </h5>

                                <p class="transactions__mob__info__row__text title-little">
                                    {{ $item['amount']}}
                                </p>
                            </div>

                            <div class="transactions__mob__info__row d-flex flex-row align-items-center">
                                <h5 class="transactions__mob__info__row__title title-little">
                                    VAT:
                                </h5>

                                <p class="transactions__mob__info__row__text">
                                    ${{ $item['vat'] }}
                                </p>
                            </div>
                        @else
                            <div class="transactions__mob__info__row d-flex flex-row align-items-center">
                                <h5 class="transactions__mob__info__row__title title-little">
                                    Status:
                                </h5>

                                @if ($item['direction'] === 'input')
                                    <img src="{{ asset('src/img/icons/transactions/input.svg')}}" alt="Input arrow" class="transactions__item__vat__img">
                                @else
                                    <img src="{{ asset('src/img/icons/transactions/output.svg')}}" alt="Input arrow" class="transactions__item__vat__img">
                                @endif

                                <p class="title-little">
                                    {{ $item['address']}}
                                </p>
                            </div>
                        @endif

                        <div class="transactions__mob__info__row d-flex flex-row align-items-center">
                            <h5 class="transactions__mob__info__row__title title-little">
                                Profit:
                            </h5>

                            <p class="transactions__mob__info__row__text">
                                {{ $item['profit'] }}
                            </p>
                        </div>

                        @if (request()->is('referral/transactions'))
                            <div class="transactions__mob__info__row d-flex flex-row align-items-center">
                                <h5 class="transactions__mob__info__row__title title-little">
                                    Link:
                                </h5>

                                <div class="d-flex flex-row align-items-center transactions__item__status">
                                    <img src="{{ asset('src/img/icons/download.svg')}}" alt="">

                                    <p class="transactions__mob__info__row__text title-little">
                                        Download
                                    </p>
                                </div>
                        </div>
                        @endif

                        @if ($item['status'] == 'completed')
                            <div
                                class="transactions__item__status--completed transactions__mob__info__row d-flex flex-row align-items-center"
                            >
                                <h5 class="transactions__mob__info__row__title title-little">
                                    Status:
                                </h5>

                                <div class="d-flex flex-row align-items-center justify-content-end transactions__item__status ">
                                    <p class="transactions__mob__info__row__text title-little">
                                        Completed
                                    </p>

                                    <img src="{{asset('src/img/icons/transactions/check.svg')}}" alt="">
                                </div>
                            </div>
                        @else
                            <div
                                class="transactions__item__status--pending transactions__mob__info__row d-flex flex-row align-items-center"
                            >
                                <h5 class="transactions__mob__info__row__title title-little">
                                    Status:
                                </h5>

                                <div class="d-flex flex-row align-items-center justify-content-end transactions__item__status">
                                    <p class="transactions__mob__info__row__text title-little">
                                        Pending
                                    </p>

                                    <img src="{{asset('src/img/icons/transactions/pending.svg')}}" alt="">
                                </div>
                            </div>
                        @endif
                    </div>
                </div>
            @endforeach
        </div>

    </div>

    @if (request()->is('referral/transactions'))
        <div class="pagination">
            <ul id="paginationT" class="pagination d-flex align-items-center">
                <!--pages or li are comes from javascript -->
            </ul>
        </div>
    @endif


    <script>
        const tbody = document.querySelector('.transactions__table__tbody')

        if (window.innerWidth > 1300 && location.pathname === '/referral/transactions') {
            tbody.classList.add('catalog');
        } else {
            tbody.classList.remove('catalog');
        }

        //mob open/close
            const container = document.querySelectorAll('.transactions__mob__block')

            container.forEach((block) => {
                const button = block.querySelector('.transactions__mob__title');
                const info = block.querySelector('.transactions__mob__info');

                button.addEventListener('click', function() {
                    if (info.style.display != 'flex') {
                        info.style.display = 'flex';
                    } else {
                        info.style.display = 'none';
                    }
                });
            });
    </script>
</div>
